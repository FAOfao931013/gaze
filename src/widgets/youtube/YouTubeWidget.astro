---
/**
 * YouTube Widget Content Component
 * Renders YouTube videos in various layouts (content only, no container)
 * Container and header are handled by Widget.astro
 *
 * Styles:
 * - horizontal-cards (default): Horizontal scrollable cards
 * - vertical-list: Compact list with collapse support
 * - grid-cards: Responsive grid with collapse support
 */

import type { WidgetProps } from '../../types/widget'
import type { YouTubeData, YouTubeWidgetConfig, YouTubeWidgetStyle } from './types'
import { YouTubeHorizontalCards } from './YouTubeHorizontalCards'
import { YouTubeVerticalList } from './YouTubeVerticalList'
import { YouTubeGridCards } from './YouTubeGridCards'

interface Props extends WidgetProps<YouTubeData> {}

const { data, config } = Astro.props

// Cast config to YouTubeWidgetConfig to access YouTube-specific properties
const youtubeConfig = config as YouTubeWidgetConfig
const style: YouTubeWidgetStyle = youtubeConfig?.style ?? 'horizontal-cards'
const collapseAfter = youtubeConfig?.collapseAfter ?? 8
---

{data && data.videos.length > 0 ? (
  <>
    {style === 'horizontal-cards' && (
      <YouTubeHorizontalCards client:load videos={data.videos} />
    )}

    {style === 'vertical-list' && (
      <YouTubeVerticalList
        client:load
        videos={data.videos}
        collapseAfter={collapseAfter}
      />
    )}

    {style === 'grid-cards' && (
      <YouTubeGridCards
        client:load
        videos={data.videos}
        collapseAfter={collapseAfter}
      />
    )}
  </>
) : (
  <div class="empty-state text-center py-8">
    <p class="text-white/40">No videos available</p>
  </div>
)}
