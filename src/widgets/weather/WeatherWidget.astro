---
/**
 * Weather Widget Content Component
 * Displays current weather information with bar chart visualization
 * Container and header are handled by Widget.astro
 */

import type { WidgetProps } from '../../types/widget'
import { WeatherChart } from './WeatherChart'
import type { WeatherData, WeatherWidgetConfig } from './types'

interface Props extends WidgetProps<WeatherData> {}

const { data, config } = Astro.props
const weatherConfig = config as WeatherWidgetConfig | undefined
const hideLocation = weatherConfig?.hideLocation ?? false
---

{data && data.columns && data.columns.length > 0 ? (
  <WeatherChart data={data} hideLocation={hideLocation} client:load />
) : data ? (
  <div class="weather-fallback font-mono">
    <div class="text-center mb-4">
      <p class="text-white text-lg font-medium">{data.condition}</p>
      <p class="text-gray-400 text-sm mt-1">Feels like {data.apparentTemperature}°</p>
    </div>
    <div class="text-center">
      <span class="text-4xl font-bold text-white">{data.temperature}°</span>
    </div>
    {!hideLocation && (
      <div class="flex items-center justify-center gap-1.5 mt-4 text-gray-500">
        <span class="text-xs">{data.location}</span>
      </div>
    )}
  </div>
) : null}
